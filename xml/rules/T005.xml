<?xml version="1.0" encoding="ISO-8859-1"?>
<rule name="T005" last-updated="2006.12.19">

<title>Keywords break and continue should be immediately followed by a semicolon</title>

<description>
<p>The <code>break</code> and <code>continue</code> keywords should be immediately followed by a semicolon, with no other tokens in between:</p>
<example>
while (...)
{
     if (...)
     {
          break;
     }
     if (...)
     {
          continue;
     }
     // ...
}
</example>
</description>

<compliance>
<standard name="Inspirel" />
</compliance>

<script><![CDATA[# Keywords break and continue should be immediately followed by a semicolon

foreach f [getSourceFileNames] {
    foreach t [getTokens $f 1 0 -1 -1 {break continue}] {
        set keyword [lindex $t 0]
        set line [lindex $t 1]
        set column [lindex $t 2]
        set semicolons [getTokens $f $line [expr $column + [string length $keyword]] [expr $line + 1] 0 {semicolon}]
        if {$semicolons == {}} {
            report $f $line "keyword '${keyword}' not immediately followed by a semicolon"
        } else {
            set semColumn [lindex [lindex $semicolons 0] 2]
            if {$semColumn != $column + [string length $keyword]} {
                report $f $line "keyword '${keyword}' not immediately followed by a semicolon"
            }
        }
    }
}
]]></script>

<test>

<source><![CDATA[@ test.cpp
void foo()
{
    while (1)
    {
        break;
        break ;
        break/*x*/;
        break
             ;
        continue;
        continue ;
        continue/*x*/;
        continue
             ;
    }
}
]]></source>

<result><![CDATA[test.cpp:6: keyword 'break' not immediately followed by a semicolon
test.cpp:7: keyword 'break' not immediately followed by a semicolon
test.cpp:8: keyword 'break' not immediately followed by a semicolon
test.cpp:11: keyword 'continue' not immediately followed by a semicolon
test.cpp:12: keyword 'continue' not immediately followed by a semicolon
test.cpp:13: keyword 'continue' not immediately followed by a semicolon
]]></result>

</test>
</rule>
