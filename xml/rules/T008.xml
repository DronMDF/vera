<?xml version="1.0" encoding="ISO-8859-1"?>
<rule name="T008" last-updated="2006.12.20">

<title>Keywords catch, for, if, switch and while should be followed by a single space</title>

<description>
<p>Keywords <code>catch</code>, <code>for</code>, <code>if</code>, <code>switch</code> and <code>while</code> should be followed by a single space and then an opening left parenthesis:</p>
<example>
catch (...)
{
     for (int i = 0; i != 10; ++i)
     {
          if (foo(i))
          {
               while (getline(cin, line))
               {
                    switch (i % 3)
                    {
                    case 0:
                         bar(line);
                         break;
                    // ...
                    }
               }
          }
     }
}
</example>
</description>

<compliance>
<standard name="Inspirel" />
</compliance>

<script><![CDATA[# Keywords catch, for, if and while should be followed by a single space

foreach f [getSourceFileNames] {
    foreach t [getTokens $f 1 0 -1 -1 {catch for if switch while}] {
        set keyword [lindex $t 0]
        set line [lindex $t 1]
        set column [lindex $t 2]
        set followingTokens [getTokens $f $line [expr $column + [string length $keyword]] [expr $line + 1] -1 {}]
        if {[llength $followingTokens] < 2} {
            report $f $line "keyword '${keyword}' not followed by a single space"
        } else {
            if {[list [lindex [lindex $followingTokens 0] 0] [lindex [lindex $followingTokens 1] 0]] != [list " " "("]} {
                report $f $line "keyword '${keyword}' not followed by a single space"
            }
        }
    }
}
]]></script>

<test>

<source><![CDATA[@ test.cpp
void foo()
{
     try {}
     catch(int) {}
     catch (long) {}
     catch  (char) {}
     catch
          (char) {}
     for(;;){}
     for (;;){}
     for  (;;){}
     if(a){}
     if (a){}
     if  (a){}
     while(a){}
     while (a){}
     while  (a){}
     switch(a){}
     switch (a){}
     switch  (a){}
}
]]></source>

<result><![CDATA[test.cpp:4: keyword 'catch' not followed by a single space
test.cpp:6: keyword 'catch' not followed by a single space
test.cpp:7: keyword 'catch' not followed by a single space
test.cpp:9: keyword 'for' not followed by a single space
test.cpp:11: keyword 'for' not followed by a single space
test.cpp:12: keyword 'if' not followed by a single space
test.cpp:14: keyword 'if' not followed by a single space
test.cpp:15: keyword 'while' not followed by a single space
test.cpp:17: keyword 'while' not followed by a single space
test.cpp:18: keyword 'switch' not followed by a single space
test.cpp:20: keyword 'switch' not followed by a single space
]]></result>

</test>
</rule>
