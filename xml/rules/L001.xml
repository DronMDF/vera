<?xml version="1.0" encoding="ISO-8859-1"?>
<rule name="L001" last-updated="2006.12.11">

<title>No trailing whitespace</title>

<description>
<p><emph>Trailing whitespace</emph> is any whitespace character (space or tab) that is placed at the end of the source line, after other characters or alone.</p>
<p>The presence of <emph>trailing whitespace</emph> artificially influences some source code metrics and is therefore discouraged.</p>
<p>As a special case, the trailing whitespace in the otherwise empty lines is allowed provided that the amount of whitespace is identical to the indent in the previous line - this exception is more friendly with less smart editors, but can be switched off by setting non-zero value for the <code>strict-trailing-space</code> parameter.</p>
</description>

<parameters>
<param name="strict-trailing-space" default="0">Strict mode for trailing whitespace.</param>
</parameters>

<compliance>
<standard name="Inspirel" />
</compliance>

<script><![CDATA[# No trailing whitespace

set strictMode [getParameter "strict-trailing-space" 0]

foreach f [getSourceFileNames] {
    set lineNumber 1
    set previousIndent ""
    foreach line [getAllLines $f] {

        if [regexp {^.*[[:space:]]+$} $line] {
            if {$strictMode || [string trim $line] != "" || $line != $previousIndent} {
                report $f $lineNumber "trailing whitespace"
            }
        }

        regexp {^([[:space:]]*).*$} $line dummy previousIndent
        incr lineNumber
    }
}
]]></script>

<test>

<source><![CDATA[@ test.cpp
int foo()
{ 
    int i;
    
}
@ test2.cpp
int i;
int foo();
 

  

]]></source>

<result><![CDATA[test.cpp:2: trailing whitespace
test2.cpp:3: trailing whitespace
test2.cpp:5: trailing whitespace
]]></result>

</test>
</rule>
